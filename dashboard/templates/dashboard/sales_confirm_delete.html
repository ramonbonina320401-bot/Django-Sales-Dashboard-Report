{% extends 'dashboard/base.html' %}
{% load static %}

{% block title %}Delete Sale{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto">
    <!-- Header -->
    <div>
        <h1 class="text-3xl font-bold text-white">Delete Sales Record?</h1>
        <p class="text-gray-400 mt-2">This action cannot be undone</p>
    </div>

    <!-- Confirmation Card -->
    <div class="mt-8 bg-red-500/10 border-2 border-red-500 rounded-xl p-8">
        <div class="flex gap-4">
            <div class="flex-shrink-0">
                <i class="fas fa-exclamation-triangle text-red-500 text-5xl"></i>
            </div>
            <div class="flex-1">
                <h2 class="text-2xl font-bold text-red-400 mb-4">Confirm Deletion</h2>
                
                <!-- Sale Info -->
                <div class="bg-gray-800 rounded-lg p-4 mb-6 border border-gray-700/50">
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <p class="text-gray-400 text-xs uppercase">Product</p>
                            <p class="text-white text-lg font-semibold mt-1">{{ sale.product.name }}</p>
                        </div>
                        <div>
                            <p class="text-gray-400 text-xs uppercase">Date</p>
                            <p class="text-white text-lg font-semibold mt-1">{{ sale.date|date:"M d, Y" }}</p>
                        </div>
                        <div>
                            <p class="text-gray-400 text-xs uppercase">Quantity</p>
                            <p class="text-teal-400 text-lg font-semibold mt-1">{{ sale.quantity }} units</p>
                        </div>
                        <div>
                            <p class="text-gray-400 text-xs uppercase">Profit</p>
                            <p class="text-green-400 text-lg font-semibold mt-1">${{ sale.profit }}</p>
                        </div>
                    </div>

                    <div class="mt-4 pt-4 border-t border-gray-700 grid grid-cols-3 gap-4">
                        <div>
                            <p class="text-gray-400 text-xs">Revenue</p>
                            <p class="text-white font-semibold">${{ sale.revenue }}</p>
                        </div>
                        <div>
                            <p class="text-gray-400 text-xs">Cost</p>
                            <p class="text-white font-semibold">${{ sale.cost }}</p>
                        </div>
                        <div>
                            <p class="text-gray-400 text-xs">Profit Margin</p>
                            <p class="text-white font-semibold">
                                {% widthratio sale.profit sale.revenue 100 as margin %}
                                {{ margin|floatformat:1 }}%
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Impact Warning -->
                <div class="bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4 mb-6">
                    <p class="text-yellow-300 text-sm">
                        <i class="fas fa-warning mr-2"></i>
                        Deleting this record will reduce your:
                    </p>
                    <ul class="text-yellow-300 text-sm mt-2 ml-6 space-y-1">
                        <li>• Total Revenue: -${{ sale.revenue }}</li>
                        <li>• Total Profit: -${{ sale.profit }}</li>
                        <li>• Sales Count: -1 unit</li>
                    </ul>
                </div>

                <!-- Buttons -->
                <form method="POST" class="flex gap-3">
                    {% csrf_token %}
                    <button type="submit" class="flex-1 px-6 py-3 bg-red-500 hover:bg-red-600 text-white rounded-lg font-semibold transition-colors flex items-center justify-center gap-2">
                        <i class="fas fa-trash"></i> Delete Record
                    </button>
                    <a href="{% url 'sales_list' %}" class="flex-1 px-6 py-3 bg-gray-700 hover:bg-gray-600 text-white rounded-lg font-semibold transition-colors flex items-center justify-center gap-2">
                        <i class="fas fa-times"></i> Cancel
                    </a>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}
